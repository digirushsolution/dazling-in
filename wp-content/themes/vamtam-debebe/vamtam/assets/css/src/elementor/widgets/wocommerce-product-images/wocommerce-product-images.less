// Product Images.
.elementor-widget-woocommerce-product-images {
	// Base Theme Widget Styles.
	&.vamtam-has-theme-widget-styles {
		&.vamtam-has-full-sized-gallery:not(.vamtam-mobile-gallery) {
			.woocommerce-product-gallery__wrapper,
			.woocommerce-product-gallery--vamtam__wrapper {
				display: grid;
				grid-template-columns: 1fr;
				justify-content: center;
				align-items: center;

				.woocommerce-product-gallery__image,
				.woocommerce-product-gallery--vamtam__image {
					width: 100% !important;
				}
			}
		}

		.woocommerce-product-gallery {
			&.vamtam-hide {
				opacity: 0 !important;
			}

			.woocommerce-product-gallery__image > a:not([href]) {
				pointer-events: none;
			}
		}

		&.elementor-element > .elementor-widget-container div.images {
			margin-bottom: 0;
		}

		span.onsale {
			top: 0;
			background-color: var(--vamtam-accent-color-1);
		}

		.woocommerce-product-gallery {
			display: flex;
			flex-direction: row-reverse;

			&.vamtam-hide {
				opacity: 0 !important;
			}

			>:is(.flex-viewport, .flex-control-thumbs, .woocommerce-product-gallery__wrapper) {
				flex: 1;
			}
		}

		div.images {
			.flex-control-thumbs {
				display: flex;
				flex-direction: column;
				max-width: 100px;
				gap: 10px;

				.woocommerce & {
					margin-right: 10px;
				}

				.woocommerce div.product & li {
					width: 100%;

					&:last-child {
						margin-bottom: 0;
					}
				}

				// Safari-only bug-fix. Remove when fixed: https://developer.apple.com/forums/thread/732976
				body.e--ua-safari & li img {
					will-change: opacity;
				}
			}
		}

		// New badge.
		.vamtam-new {
			display: none;
			position: absolute;
			text-align: center;
			font-family: "Montserrat", Sans-serif;
			font-size: 10px;
			font-weight: normal;
			line-height: 56px;
			border-radius: 6px;
			min-width: 56px;
			min-height: 56px;
			right: auto;
			margin: 22px;
			left: 0;
			top: 0;

			color: var(--vamtam-accent-color-5);
			background-color: var(--vamtam-accent-color-2);
			z-index: 9;
			border-radius: 50%;
		}
		&.vamtam-has-onsale-yes {
			:where(.vamtam-new) {
				&.vamtam-onsale {
					top: 63px;
				}
			}
		}
		// SVG clip path used for the new & onsale badges.
		.vamtam-svg-cp {
			position: absolute;
			width: 0;
			height: 0;
			overflow: hidden;
		}
		&.vamtam-has-onsale-badge-theme-mask {
			.onsale {
				clip-path: url('#vamtam-badge-cp');
				border-radius: 0;
				// Fix for Safari. https://stackoverflow.com/a/72479686/4696595
				body.e--ua-safari & {
					transform: translateZ(0);
				}
			}
		}
		&.vamtam-has-new-badge-theme-mask {
			.vamtam-new {
				clip-path: url('#vamtam-badge-cp');
				border-radius: 0;
				// Fix for Safari. https://stackoverflow.com/a/72479686/4696595
				body.e--ua-safari & {
					transform: translateZ(0);
				}
			}
		}
		&:is(.vamtam-has-onsale-yes, .vamtam-has-new-badge) {
			.woocommerce-product-gallery__wrapper {
				position: relative;
			}
		}

		:is( span.onsale, .vamtam-new ) {
			left: 0;
		}
	}
}
