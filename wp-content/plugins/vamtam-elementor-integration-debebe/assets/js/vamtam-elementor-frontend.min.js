!function($,undefined){"use strict";window.VAMTAM_FRONT.elementor=window.VAMTAM_FRONT.elementor||{};var VAMTAM_ELEMENTOR={domLoaded:function(){this.VamtamMainNavHandler.init(),this.VamtamActionLinksHandler.init(),this.VamtamPopupsHandler.disablePopupAutoFocus(),elementorFrontend.config.experimentalFeatures.e_optimized_css_loading&&this.VamtamImprovedCSSLoadingHandler.init()},pageLoaded:function(){this.VamtamPopupsHandler.init(),this.VamtamWidgetsHandler.FiboSearchBarWidget()},VamtamPopupsHandler:{init:function(){this.searchFormPopupsGetFocus(),this.absolutelyPositionedPopups(),this.enablePageTransitionsForPopupLinks()},searchFormPopupsGetFocus:function(){window.elementorFrontendConfig.kit.vamtam_theme_search_form_popups_get_focus&&elementorFrontend.elements.$window.on("elementor/popup/show",event=>{if(!event.originalEvent)return;const id=event.originalEvent.detail.id,instance=event.originalEvent.detail.instance;if(!id||!instance)return;const popupHasSearchForm=instance.$element.find('form[role="search"]').length;if(popupHasSearchForm){const $input=instance.$element.find('input[type="search"]').first();$input.focus(),$input.filter('[id^="dgwt-wcas-"]')&&setTimeout(()=>{$input.focus()},500)}})},absolutelyPositionedPopups:function(){const cache=[];elementorFrontend.elements.$window.on("elementor/popup/show",event=>{if(!event.originalEvent)return;const id=event.originalEvent.detail.id,instance=event.originalEvent.detail.instance;if(!id||!instance||cache.includes(id))return;const isAbsPositioned=instance.$element.filter('[data-elementor-settings*="vamtam_abs_pos"]').length;isAbsPositioned&&(instance.$element.closest(`#elementor-popup-modal-${id}`).addClass("vamtam-abs-pos"),cache.push(id))})},disablePopupAutoFocus:function(){elementorFrontend.elements.$window.on("elementor/popup/show elementor/popup/hide",event=>{setTimeout(()=>{"input"!==document.activeElement.nodeName&&document.activeElement.blur()},100)})},enablePageTransitionsForPopupLinks(){if(!elementorFrontend.config.experimentalFeatures["page-transitions"])return;let $pageTransitionEl=jQuery("e-page-transition");if(!$pageTransitionEl.length)return;$pageTransitionEl=$pageTransitionEl[0];const triggers=$pageTransitionEl.getAttribute("triggers");if(triggers)return;const selector='.elementor-popup-modal a:not( [data-elementor-open-lightbox="yes"] )',onLinkClickHandler=$pageTransitionEl.onLinkClick;onLinkClickHandler&&jQuery(document).on("click",selector,onLinkClickHandler.bind($pageTransitionEl))}},VamtamMainNavHandler:{init:function(){this.fixMenuDrodownScrolling()},fixMenuDrodownScrolling:function(){var $mainMenuDropdown=$(".elementor-location-header .elementor-nav-menu--dropdown-tablet .elementor-nav-menu--dropdown.elementor-nav-menu__container").first(),menuToggle=$mainMenuDropdown.siblings(".elementor-menu-toggle")[0];if($mainMenuDropdown.length&&menuToggle.length){var onMenuToggleClick=function(){if($(menuToggle).hasClass("elementor-active")){var height=$("html").hasClass("ios-safari")?$mainMenuDropdown[0].getBoundingClientRect().top+100:$mainMenuDropdown[0].getBoundingClientRect().top;$mainMenuDropdown.css("max-height","calc(100vh - "+height+"px)"),menuToggle.removeEventListener("click",onMenuToggleClick)}};menuToggle.addEventListener("click",onMenuToggleClick)}}},VamtamActionLinksHandler:{init:function(){this.popupActionLinks()},popupActionLinks:function(){var _self=this,prevIsBelowMax=window.VAMTAM.isBelowMaxDeviceWidth(),alignedPopups=[],handleAlignWithParent=function(popupId,popupParent,clearPrevPos){var popupWrapper=$("#elementor-popup-modal-"+popupId),popup=$(popupWrapper).find(".dialog-widget-content"),adminBarHeight=window.VAMTAM.adminBarHeight;if(popup.length&&popupParent){var parentPos=popupParent.getBoundingClientRect(),visibilityCheck;clearPrevPos?$(popup).css({top:"",left:""}):($(popup).css({top:parentPos.bottom-adminBarHeight,left:parentPos.left}),visibilityCheck=setInterval((function(){"none"===$(popupWrapper).css("display")&&($(popup).css({top:"",left:""}),clearInterval(visibilityCheck))}),500))}},repositionAlignedPopups=function(clear){alignedPopups.forEach((function(popup){clear?handleAlignWithParent(popup.id,popup.parent,!0):handleAlignWithParent(popup.id,popup.parent)}))},popupResizeHandler=function(){var isBelowMax=window.VAMTAM.isBelowMaxDeviceWidth();prevIsBelowMax!==isBelowMax?(isBelowMax?repositionAlignedPopups(!0):repositionAlignedPopups(),prevIsBelowMax=isBelowMax):isBelowMax||repositionAlignedPopups()},popupScrollHandler=function(){requestAnimationFrame((function(){repositionAlignedPopups()}))},storePopup=function(popupId,popupParent){var done;alignedPopups.forEach((function(popup){popup.id===popupId&&(popup.parent=popupParent,done=!0)})),done||alignedPopups.push({id:popupId,parent:popupParent})};function checkForStickyParent(popupParent){const parentEl=$(popupParent).parents(".elementor-element.elementor-widget")[0];if(!parentEl)return;let parentElSettings=$(parentEl).attr("data-settings");if(!parentElSettings)return;try{parentElSettings=JSON.parse(parentElSettings)}catch(error){return}const hasStickyParent=parentElSettings.sticky;hasStickyParent&&(window.removeEventListener("scroll",popupScrollHandler),window.addEventListener("scroll",popupScrollHandler,{passive:!0}))}var checkAlignWithParent=function(e){var actionLink=$(e.currentTarget).attr("href");if(actionLink){var settings=_self.utils.getSettingsFromActionLink(actionLink);settings&&settings.align_with_parent&&(storePopup(settings.id,e.currentTarget),window.VAMTAM.isMaxDeviceWidth()&&handleAlignWithParent(settings.id,e.currentTarget),window.removeEventListener("resize",popupResizeHandler),window.addEventListener("resize",popupResizeHandler,!1),checkForStickyParent(e.currentTarget))}};elementorFrontend.elements.$document.on("click",'a[href^="#elementor-action"]',checkAlignWithParent)},utils:{getSettingsFromActionLink:function(url){if(url=decodeURIComponent(url)){var settingsMatch=url.match(/settings=(.+)/),settings={};return settingsMatch&&(settings=JSON.parse(atob(settingsMatch[1]))),settings}},getActionFromActionLink:function(url){if(url=decodeURIComponent(url)){var actionMatch=url.match(/action=(.+?)&/),action;if(actionMatch)return actionMatch[1]}}}},VamtamWidgetsHandler:{FiboSearchBarWidget:()=>{VAMTAM_ELEMENTOR.VamtamWidgetsHandler.isWidgetModActive("wp-widget-dgwt_wcas_ajax_search")&&($(".dgwt-wcas-suggestions-wrapp").addClass("vamtam-has-theme-widget-styles"),$(".dgwt-wcas-details-wrapp").addClass("vamtam-has-theme-widget-styles"),window.addEventListener("beforeunload",()=>{$(".dgwt-wcas-suggestions-wrapp, .dgwt-wcas-details-wrapp").hide()},{capture:!0}))},isWidgetModActive:widgetName=>{if(!widgetName)return!1;const siteSettings=elementorFrontend.getKitSettings(),themePrefix="vamtam_theme_",widgetModsList=window.VAMTAM_FRONT.widget_mods_list;return!!widgetModsList[widgetName]&&("yes"===siteSettings.vamtam_theme_enable_all_widget_mods||"yes"!==siteSettings.vamtam_theme_disable_all_widget_mods&&"yes"===siteSettings[`vamtam_theme_${widgetName}`])}},VamtamImprovedCSSLoadingHandler:{init:()=>{const widgetData={...VAMTAM_FRONT.widgets_assets_data};if(!widgetData)return;$("#vamtam-all-js-after").remove(),delete VAMTAM_FRONT.widgets_assets_data;let out="";Object.keys(widgetData).forEach(widget=>{const content=widgetData[widget].content,widgetSelector=`.elementor-widget-${widget} > .elementor-widget-container`;if(content){if($(`${widgetSelector} > style, ${widgetSelector} > link`).length)return;out=out+"\r\n"+content}}),out&&$("body").append(`<div id="vamtam-css-opt-fallback">${out}</div>`)}}};window.VAMTAM_FRONT.elementor.urlActions=VAMTAM_ELEMENTOR.VamtamActionLinksHandler.utils,window.VAMTAM_FRONT.elementor.widgets={isWidgetModActive:VAMTAM_ELEMENTOR.VamtamWidgetsHandler.isWidgetModActive},$(document).ready((function(){VAMTAM_ELEMENTOR.domLoaded()})),$(window).on("load",(function(){VAMTAM_ELEMENTOR.pageLoaded()}));class VamtamElementBase extends elementorModules.frontend.handlers.Base{onInit(...args){super.onInit(...args),this.checkAddBaseThemeStylesClass()}checkAddBaseThemeStylesClass(){const isEditor=$("body").hasClass("elementor-editor-active");isEditor&&this.isWidgetModActive()&&this.$element.addClass("vamtam-has-theme-widget-styles")}isWidgetModActive(){let widgetName=this.getElementType();return"widget"===widgetName&&(widgetName=this.getWidgetType()),VAMTAM_ELEMENTOR.VamtamWidgetsHandler.isWidgetModActive(widgetName)}}jQuery(window).on("elementor/frontend/init",()=>{const addHandler=$element=>{elementorFrontend.elementsHandler.addHandler(VamtamElementBase,{$element:$element})};elementorFrontend.hooks.addAction("frontend/element_ready/global",addHandler)})}(jQuery);